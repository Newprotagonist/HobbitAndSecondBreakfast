<div class="row index-title mx-auto mb-5 pt-3">
  <div class="col-sm-12">
    <h1>Choose your Hobbit !</h1>
  </div>
</div>
<div class="row mx-auto mb-5 pt-3 form col-sm-6">
  <div class="form-text" data-controller="filter">
    <%= form_with url: offers_path, method: :get do |f| %>
    <h4>Filter by</h4>
      <%= f.label :offer_price, "Max Price" %>
      <div class="d-flex">
      <%= f.range_field :offer_price, in: 0..1000, step: 50, data: {filter_target: "price", action: "filter#display"}%>
      <p data-filter-target="value">0</p>
      <i class="fa-solid fa-coins"></i>
      </div>
      <%= f.label :offer_location, "Choose location" %>
      <br>
      <%= f.collection_select :offer_location, Offer.order(:location), :id, :location, :include_blank => true  %>
      <br>
      <%= f.submit "Apply Filter", class:"button-normal" %>
  <% end %>
  </div>
</div>



<div class="row">
  <% @offers.each do |offer| %>
    <div class="col-sm-12 col-md-6 col-lg-3">
      <div class="card mx-auto my-2" style="width: 300px; overflow: hidden;">
        <div class="picture row align-items-center">
          <% if !offer.photos.empty? %>
            <%= cl_image_tag offer.photos[0].key%>
          <% else %>
            <%= image_tag ('no-picture.gif') %>
            <p>No pictures found</p>
          <% end %>
        </div>
        <div class="card-body">
          <div class="card-title pb-2">
            <%= link_to "#{offer.user[:first_name]} #{offer.user[:last_name]}", offer_path(offer) %>
          </div>
          <div>
            <div>
              📍 <%= offer.location %>
            </div>
            <div>
              💰 <%= offer.price %> golds / per day
            </div>
          </div>
          <div class="summary mt-1 pt-1">
            <em><%= offer.summary[0,50] %>...</em>
          </div>
        </div>
    </div>
</div>
<% end %>
